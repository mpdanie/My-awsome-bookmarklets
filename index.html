<h1>my bookmarklet games</h1>
<title>michaels bookmarklet site!</title>
<a href="javascript:(function()%7B%2F%2F%20See%20license%3A%20https%3A%2F%2Fgithub.com%2Ferkie%2Ferkie.github.com%2Fblob%2Fmaster%2FREADME%0A%0A(function()%20%7B%0Afunction%20Asteroids()%20%7B%0A%09if%20(%20!%20window.ASTEROIDS%20)%0A%09%09window.ASTEROIDS%20%3D%20%7B%0A%09%09%09enemiesKilled%3A%200%2C%0A%09%09%09startedPlaying%3A%20(new%20Date()).getTime()%0A%09%09%7D%3B%0A%0A%09var%20BASEPATH%20%3D%20'http%3A%2F%2Fkickassapp.com%2F'%3B%0A%0A%09%2F*%0A%09%09Classes%0A%09*%2F%0A%0A%09function%20Vector(x%2C%20y)%20%7B%0A%09%09if%20(%20typeof%20x%20%3D%3D%20'Object'%20)%20%7B%0A%09%09%09this.x%20%3D%20x.x%3B%0A%09%09%09this.y%20%3D%20x.y%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09this.x%20%3D%20x%3B%0A%09%09%09this.y%20%3D%20y%3B%0A%09%09%7D%0A%09%7D%3B%0A%0A%09Vector.prototype%20%3D%20%7B%0A%09%09cp%3A%20function()%20%7B%0A%09%09%09return%20new%20Vector(this.x%2C%20this.y)%3B%0A%09%09%7D%2C%0A%0A%09%09mul%3A%20function(factor)%20%7B%0A%09%09%09this.x%20*%3D%20factor%3B%0A%09%09%09this.y%20*%3D%20factor%3B%0A%09%09%09return%20this%3B%0A%09%09%7D%2C%0A%0A%09%09mulNew%3A%20function(factor)%20%7B%0A%09%09%09return%20new%20Vector(this.x%20*%20factor%2C%20this.y%20*%20factor)%3B%0A%09%09%7D%2C%0A%0A%09%09add%3A%20function(vec)%20%7B%0A%09%09%09this.x%20%2B%3D%20vec.x%3B%0A%09%09%09this.y%20%2B%3D%20vec.y%3B%0A%09%09%09return%20this%3B%0A%09%09%7D%2C%0A%0A%09%09addNew%3A%20function(vec)%20%7B%0A%09%09%09return%20new%20Vector(this.x%20%2B%20vec.x%2C%20this.y%20%2B%20vec.y)%3B%0A%09%09%7D%2C%0A%0A%09%09sub%3A%20function(vec)%20%7B%0A%09%09%09this.x%20-%3D%20vec.x%3B%0A%09%09%09this.y%20-%3D%20vec.y%3B%0A%09%09%09return%20this%3B%0A%09%09%7D%2C%0A%0A%09%09subNew%3A%20function(vec)%20%7B%0A%09%09%09return%20new%20Vector(this.x%20-%20vec.x%2C%20this.y%20-%20vec.y)%3B%0A%09%09%7D%2C%0A%0A%09%09%2F%2F%20angle%20in%20radians%0A%09%09rotate%3A%20function(angle)%20%7B%0A%09%09%09var%20x%20%3D%20this.x%2C%20y%20%3D%20this.y%3B%0A%09%09%09this.x%20%3D%20x%20*%20Math.cos(angle)%20-%20Math.sin(angle)%20*%20y%3B%0A%09%09%09this.y%20%3D%20x%20*%20Math.sin(angle)%20%2B%20Math.cos(angle)%20*%20y%3B%0A%09%09%09return%20this%3B%0A%09%09%7D%2C%0A%0A%09%09%2F%2F%20angle%20still%20in%20radians%0A%09%09rotateNew%3A%20function(angle)%20%7B%0A%09%09%09return%20this.cp().rotate(angle)%3B%0A%09%09%7D%2C%0A%0A%09%09%2F%2F%20angle%20in%20radians...%20again%0A%09%09setAngle%3A%20function(angle)%20%7B%0A%09%09%09var%20l%20%3D%20this.len()%3B%0A%09%09%09this.x%20%3D%20Math.cos(angle)%20*%20l%3B%0A%09%09%09this.y%20%3D%20Math.sin(angle)%20*%20l%3B%0A%09%09%09return%20this%3B%0A%09%09%7D%2C%0A%0A%09%09%2F%2F%20RADIANS%0A%09%09setAngleNew%3A%20function(angle)%20%7B%0A%09%09%09return%20this.cp().setAngle(angle)%3B%0A%09%09%7D%2C%0A%0A%09%09setLength%3A%20function(length)%20%7B%0A%09%09%09var%20l%20%3D%20this.len()%3B%0A%09%09%09if%20(%20l%20)%20this.mul(length%20%2F%20l)%3B%0A%09%09%09else%20this.x%20%3D%20this.y%20%3D%20length%3B%0A%09%09%09return%20this%3B%0A%09%09%7D%2C%0A%0A%09%09setLengthNew%3A%20function(length)%20%7B%0A%09%09%09return%20this.cp().setLength(length)%3B%0A%09%09%7D%2C%0A%0A%09%09normalize%3A%20function()%20%7B%0A%09%09%09var%20l%20%3D%20this.len()%3B%0A%09%09%09this.x%20%2F%3D%20l%3B%0A%09%09%09this.y%20%2F%3D%20l%3B%0A%09%09%09return%20this%3B%0A%09%09%7D%2C%0A%0A%09%09normalizeNew%3A%20function()%20%7B%0A%09%09%09return%20this.cp().normalize()%3B%0A%09%09%7D%2C%0A%0A%09%09angle%3A%20function()%20%7B%0A%09%09%09return%20Math.atan2(this.y%2C%20this.x)%3B%0A%09%09%7D%2C%0A%0A%09%09collidesWith%3A%20function(rect)%20%7B%0A%09%09%09return%20this.x%20%3E%20rect.x%20%26%26%20this.y%20%3E%20rect.y%20%26%26%20this.x%20%3C%20rect.x%20%2B%20rect.width%20%26%26%20this.y%20%3C%20rect.y%20%2B%20rect.height%3B%0A%09%09%7D%2C%0A%0A%09%09len%3A%20function()%20%7B%0A%09%09%09var%20l%20%3D%20Math.sqrt(this.x%20*%20this.x%20%2B%20this.y%20*%20this.y)%3B%0A%09%09%09if%20(%20l%20%3C%200.005%20%26%26%20l%20%3E%20-0.005)%20return%200%3B%0A%09%09%09return%20l%3B%0A%09%09%7D%2C%0A%0A%09%09is%3A%20function(test)%20%7B%0A%0A%09%09%09return%20typeof%20test%20%3D%3D%20'object'%20%26%26%20this.x%20%3D%3D%20test.x%20%26%26%20this.y%20%3D%3D%20test.y%3B%0A%09%09%7D%2C%0A%0A%09%09toString%3A%20function()%20%7B%0A%09%09%09return%20'%5BVector('%20%2B%20this.x%20%2B%20'%2C%20'%20%2B%20this.y%20%2B%20')%20angle%3A%20'%20%2B%20this.angle()%20%2B%20'%2C%20length%3A%20'%20%2B%20this.len()%20%2B%20'%5D'%3B%0A%09%09%7D%0A%09%7D%3B%0A%0A%09function%20Line(p1%2C%20p2)%20%7B%0A%09%09this.p1%20%3D%20p1%3B%0A%09%09this.p2%20%3D%20p2%3B%0A%09%7D%3B%0A%0A%09Line.prototype%20%3D%20%7B%0A%09%09shift%3A%20function(pos)%20%7B%0A%09%09%09this.p1.add(pos)%3B%0A%09%09%09this.p2.add(pos)%3B%0A%09%09%7D%2C%0A%0A%09%09intersectsWithRect%3A%20function(rect)%20%7B%0A%09%09%09var%20LL%20%3D%20new%20Vector(rect.x%2C%20rect.y%20%2B%20rect.height)%3B%0A%09%09%09var%20UL%20%3D%20new%20Vector(rect.x%2C%20rect.y)%3B%0A%09%09%09var%20LR%20%3D%20new%20Vector(rect.x%20%2B%20rect.width%2C%20rect.y%20%2B%20rect.height)%3B%0A%09%09%09var%20UR%20%3D%20new%20Vector(rect.x%20%2B%20rect.width%2C%20rect.y)%3B%0A%0A%09%09%09if%20(%0A%09%09%09%09this.p1.x%20%3E%20LL.x%20%26%26%20this.p1.x%20%3C%20UR.x%20%26%26%20this.p1.y%20%3C%20LL.y%20%26%26%20this.p1.y%20%3E%20UR.y%20%26%26%0A%09%09%09%09this.p2.x%20%3E%20LL.x%20%26%26%20this.p2.x%20%3C%20UR.x%20%26%26%20this.p2.y%20%3C%20LL.y%20%26%26%20this.p2.y%20%3E%20UR.y%0A%09%09%09)%20return%20true%3B%0A%0A%09%09%09if%20(%20this.intersectsLine(new%20Line(UL%2C%20LL))%20)%20return%20true%3B%0A%09%09%09if%20(%20this.intersectsLine(new%20Line(LL%2C%20LR))%20)%20return%20true%3B%0A%09%09%09if%20(%20this.intersectsLine(new%20Line(UL%2C%20UR))%20)%20return%20true%3B%0A%09%09%09if%20(%20this.intersectsLine(new%20Line(UR%2C%20LR))%20)%20return%20true%3B%0A%09%09%09return%20false%3B%0A%09%09%7D%2C%0A%0A%09%09intersectsLine%3A%20function(line2)%20%7B%0A%09%09%09var%20v1%20%3D%20this.p1%2C%20v2%20%3D%20this.p2%3B%0A%09%09%09var%20v3%20%3D%20line2.p1%2C%20v4%20%3D%20line2.p2%3B%0A%0A%09%09%09var%20denom%20%3D%20((v4.y%20-%20v3.y)%20*%20(v2.x%20-%20v1.x))%20-%20((v4.x%20-%20v3.x)%20*%20(v2.y%20-%20v1.y))%3B%0A%09%09%09var%20numerator%20%3D%20((v4.x%20-%20v3.x)%20*%20(v1.y%20-%20v3.y))%20-%20((v4.y%20-%20v3.y)%20*%20(v1.x%20-%20v3.x))%3B%0A%0A%09%09%09var%20numerator2%20%3D%20((v2.x%20-%20v1.x)%20*%20(v1.y%20-%20v3.y))%20-%20((v2.y%20-%20v1.y)%20*%20(v1.x%20-%20v3.x))%3B%0A%0A%09%09%09if%20(%20denom%20%3D%3D%200.0%20)%20%7B%0A%09%09%09%09return%20false%3B%0A%09%09%09%7D%0A%09%09%09var%20ua%20%3D%20numerator%20%2F%20denom%3B%0A%09%09%09var%20ub%20%3D%20numerator2%20%2F%20denom%3B%0A%0A%09%09%09return%20(ua%20%3E%3D%200.0%20%26%26%20ua%20%3C%3D%201.0%20%26%26%20ub%20%3E%3D%200.0%20%26%26%20ub%20%3C%3D%201.0)%3B%0A%09%09%7D%0A%09%7D%3B%0A%0A%09function%20Highscores()%20%7B%0A%0A%09%7D%3B%0A%0A%09Highscores.prototype%20%3D%20%7B%0A%09%20%20build%3A%20function()%20%7B%0A%09%20%20%20%20%20%20var%20self%20%3D%20this%3B%0A%0A%20%20%20%20%09%09var%20w%20%3D%20(document.clientWidth%20%7C%7C%20window.innerWidth%20%7C%7C%20document.documentElement.clientWidth)%3B%0A%20%20%20%20%09%09var%20h%20%3D%20(document.clientHeight%20%7C%7C%20window.innerHeight%20%7C%7C%20document.documentElement.clientHeight)%3B%0A%0A%20%20%20%20%09%09this.container%20%3D%20document.createElement('div')%3B%0A%20%20%20%20%09%09this.container.className%20%3D%20%22ASTEROIDSYEAH%22%3B%0A%20%20%20%20%09%09with%20(%20this.container.style%20)%20%7B%0A%20%20%20%20%09%09%09position%20%3D%20%22fixed%22%3B%0A%20%20%20%20%09%09%09top%20%3D%20parseInt(h%20%2F%202%20-%20250%2C%2010)%20%2B%20%22px%22%3B%0A%20%20%20%20%09%09%09left%20%3D%20parseInt(w%20%2F%202%20-%20250%2C%2010)%20%2B%20%22px%22%3B%0A%20%20%20%20%09%09%09width%20%3D%20%22500px%22%3B%0A%20%20%20%20%09%09%09height%20%3D%20%22500px%22%3B%0A%20%20%20%20%09%09%09boxShadow%20%3D%20MsBoxShadow%20%3D%20OBoxShadow%20%3D%20MozBoxShadow%20%3D%20WebkitBoxShadow%20%3D%20%220%200%2025px%20%23000%22%3B%0A%20%20%20%20%09%09%09zIndex%20%3D%20%221000002%22%3B%0A%09%09%09%09%2F%2FwebkitTransform%20causes%20a%20bug%20where%20you%20can't%20click%20anything%20in%20the%20iframe%20if%20the%20scroll%20is%20not%20top%0A%20%20%20%20%09%09%09%2F%2FwebkitTransform%20%3D%20'scale(0%2C%200)'%3B%0A%20%20%20%20%09%09%09%2F%2FwebkitTransition%20%3D%20%22-webkit-transform%20500ms%22%3B%0A%20%20%20%20%09%09%09background%20%3D%20'%23222'%3B%0A%20%20%20%20%09%09%7D%3B%0A%20%20%20%20%09%09document.body.appendChild(this.container)%3B%0A%0A%20%20%20%20%09%09%2F%2F%20Create%20iframe%0A%20%20%20%20%09%09this.iframe%20%3D%20document.createElement('iframe')%3B%0A%20%20%20%20%09%09this.iframe.className%20%3D%20%22ASTEROIDSYEAH%22%3B%0A%20%20%20%20%09%09this.iframe.width%20%3D%20this.iframe.height%20%3D%20500%3B%0A%20%20%20%20%09%09this.iframe.frameBorder%20%3D%200%3B%0A%20%20%20%20%09%09this.container.appendChild(this.iframe)%3B%0A%0A%20%20%20%20%09%09%2F%2F%20Create%20close%20button%0A%20%20%20%20%09%09this.close%20%3D%20document.createElement('a')%3B%0A%20%20%20%20%09%09this.close.href%20%3D%20%22%23%22%3B%0A%20%20%20%20%09%09this.close.onclick%20%3D%20function()%20%7B%0A%20%20%20%20%09%09%09self.hide()%3B%0A%20%20%20%20%09%09%09return%20false%3B%0A%20%20%20%20%09%09%7D%3B%0A%20%20%20%20%09%09this.close.innerHTML%20%3D%20%22X%22%3B%0A%20%20%20%20%09%09with%20(%20this.close.style%20)%20%7B%0A%20%20%20%20%09%09%09position%20%3D%20%22absolute%22%3B%0A%20%20%20%20%09%09%09display%20%3D%20%22block%22%3B%0A%20%20%20%20%09%09%09padding%20%3D%20%222px%206px%22%3B%0A%20%20%20%20%09%09%09top%20%3D%20%22-12px%22%3B%0A%20%20%20%20%09%09%09right%20%3D%20%22-12px%22%3B%0A%20%20%20%20%09%09%09background%20%3D%20%22%23222%22%3B%0A%20%20%20%20%09%09%09%2F%2FtextIndent%20%3D%20%22-10000px%22%3B%0A%20%20%20%20%09%09%09border%20%3D%20%223px%20solid%20%23fff%22%3B%0A%20%20%20%20%09%09%09boxShadow%20%3D%20%221px%201px%205px%20%23000%22%3B%0A%20%20%20%20%09%09%09color%20%3D%20%22%23fff%22%3B%0A%20%20%20%20%09%09%09textAlign%20%3D%20%22center%22%3B%0A%20%20%20%20%09%09%09borderRadius%20%3D%20%2224px%22%3B%0A%20%20%20%20%09%09%09outline%20%3D%20%22none%22%3B%0A%20%20%20%20%09%09%09textDecoration%20%3D%20%22none%22%3B%0A%20%20%20%20%09%09%09fontFamily%20%3D%20%22Verdana%22%3B%0A%20%20%20%20%09%09%09fontSize%20%3D%20%2216px%22%3B%0A%20%20%20%20%09%09%09fontWeight%20%3D%20%22bold%22%3B%0A%20%20%20%20%09%09%09zIndex%20%3D%20%2210003%22%3B%0A%20%20%20%20%09%09%7D%0A%20%20%20%20%09%09this.container.appendChild(this.close)%3B%0A%20%20%20%20%09%09this.hide()%3B%0A%0A%20%20%20%20%09%09document.body.appendChild(this.container)%3B%0A%09%20%20%7D%2C%0A%0A%09%09show%3A%20function()%20%7B%0A%09%09%20%20this.build()%3B%0A%09%09%20%20this.container.style.display%20%3D%20'block'%3B%0A%0A%09%09%09var%20self%20%3D%20this%3B%0A%09%09%09setTimeout(function()%20%7B%0A%09%09%09%20%20%2F%2Fself.container.style.webkitTransform%20%3D%20'scale(1%2C%201)'%3B%0A%09%09%09%7D%2C%2050)%3B%0A%0A%09%09%09this.sendScore()%3B%0A%09%09%7D%2C%0A%0A%09%09hide%3A%20function()%20%7B%0A%09%09%09if%20(%20this.container%20%26%26%20this.container.parentNode%20)%0A%09%09%09%09this.container.parentNode.removeChild(this.container)%3B%0A%09%09%7D%2C%0A%0A%09%09sendScore%3A%20function()%20%7B%0A%09%09%20%20var%20timePlayed%20%3D%20(new%20Date()).getTime()%20-%20window.ASTEROIDS.startedPlaying%3B%0A%09%09%09this.iframe.src%20%3D%20highscoreURL%20%2B%20%22%3Fasd%3D%22%20%2B%20(window.ASTEROIDS.enemiesKilled%20*%2010).toString()%20%2B%20%22%26sad%3D%22%20%2B%20escape(document.location.href)%20%2B%20'%26das%3D'%20%2B%20timePlayed%3B%0A%09%09%7D%0A%09%7D%3B%0A%0A%09%2F*%0A%09%09end%20classes%2C%20begin%20code%0A%09*%2F%0A%0A%09var%20that%20%3D%20this%3B%0A%0A%09var%20isIE%20%3D%20!!window.ActiveXObject%3B%20%2F%2F%20IE%20gets%20less%20performance-intensive%0A%09var%20isIEQuirks%20%3D%20isIE%20%26%26%20document.compatMode%20%3D%3D%20%22BackCompat%22%3B%0A%0A%09%2F%2F%20configuration%20directives%20are%20placed%20in%20local%20variables%0A%09var%20w%20%3D%20document.documentElement.clientWidth%2C%20h%20%3D%20document.documentElement.clientHeight%3B%0A%09if%20(%20isIEQuirks%20)%20%7B%0A%09%09w%20%3D%20document.body.clientWidth%3B%0A%09%09h%20%3D%20document.body.clientHeight%3B%0A%09%7D%0A%0A%09var%20playerWidth%20%3D%2020%2C%20playerHeight%20%3D%2030%3B%0A%0A%09var%20playerVerts%20%3D%20%5B%5B-1%20*%20playerHeight%2F2%2C%20-1%20*%20playerWidth%2F2%5D%2C%20%5B-1%20*%20playerHeight%2F2%2C%20playerWidth%2F2%5D%2C%20%5BplayerHeight%2F2%2C%200%5D%5D%3B%0A%0A%09var%20ignoredTypes%20%3D%20%5B'HTML'%2C%20'HEAD'%2C%20'BODY'%2C%20'SCRIPT'%2C%20'TITLE'%2C%20'META'%2C%20'STYLE'%2C%20'LINK'%5D%3B%0A%09if%20(%20window.ActiveXObject%20)%0A%09%09ignoredTypes%20%3D%20%5B'HTML'%2C%20'HEAD'%2C%20'BODY'%2C%20'SCRIPT'%2C%20'TITLE'%2C%20'META'%2C%20'STYLE'%2C%20'LINK'%2C%20'SHAPE'%2C%20'LINE'%2C%20'GROUP'%2C%20'IMAGE'%2C%20'STROKE'%2C%20'FILL'%2C%20'SKEW'%2C%20'PATH'%2C%20'TEXTPATH'%2C%20'INS'%5D%3B%20%2F%2F%20Half%20of%20these%20are%20for%20IE%20g_vml%0A%09var%20hiddenTypes%20%3D%20%5B'BR'%2C%20'HR'%5D%3B%0A%0A%09var%20FPS%20%3D%2050%3B%0A%0A%09%2F%2F%20units%2Fsecond%0A%09var%20acc%09%09%09%20%20%3D%20300%3B%0A%09var%20maxSpeed%09%20%20%3D%20600%3B%0A%09var%20rotSpeed%09%20%20%3D%20360%3B%20%2F%2F%20one%20rotation%20per%20second%0A%09var%20bulletSpeed%09%20%20%3D%20700%3B%0A%09var%20particleSpeed%20%3D%20400%3B%0A%0A%09var%20timeBetweenFire%20%3D%20150%3B%20%2F%2F%20how%20many%20milliseconds%20between%20shots%0A%09var%20timeBetweenBlink%20%3D%20250%3B%20%2F%2F%20milliseconds%20between%20enemy%20blink%0A%09var%20timeBetweenEnemyUpdate%20%3D%20isIE%20%3F%2010000%20%3A%202000%3B%0A%09var%20bulletRadius%20%3D%202%3B%0A%09var%20maxParticles%20%3D%20isIE%20%3F%2020%20%3A%2040%3B%0A%09var%20maxBullets%20%3D%20isIE%20%3F%2010%20%3A%2020%3B%0A%0A%09var%20highscoreURL%20%3D%20BASEPATH%20%2B%20%22highscores%2F%22%3B%0A%0A%09%2F%2F%20generated%20every%2010%20ms%0A%09this.flame%20%3D%20%7Br%3A%20%5B%5D%2C%20y%3A%20%5B%5D%7D%3B%0A%0A%09%2F%2F%20blink%20style%0A%09this.toggleBlinkStyle%20%3D%20function%20()%20%7B%0A%09%09if%20(this.updated.blink.isActive)%20%7B%0A%09%09%09removeClass(document.body%2C%20'ASTEROIDSBLINK')%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09addClass(document.body%2C%20'ASTEROIDSBLINK')%3B%0A%09%09%7D%0A%0A%09%09this.updated.blink.isActive%20%3D%20!this.updated.blink.isActive%3B%0A%09%7D%3B%0A%0A%09addStylesheet(%22.ASTEROIDSBLINK%20.ASTEROIDSYEAHENEMY%22%2C%20%22outline%3A%202px%20dotted%20red%3B%22)%3B%0A%0A%09this.pos%20%3D%20new%20Vector(100%2C%20100)%3B%0A%09this.lastPos%20%3D%20false%3B%0A%09this.vel%20%3D%20new%20Vector(0%2C%200)%3B%0A%09this.dir%20%3D%20new%20Vector(0%2C%201)%3B%0A%09this.keysPressed%20%3D%20%7B%7D%3B%0A%09this.firedAt%20%3D%20false%3B%0A%09this.updated%20%3D%20%7B%0A%09%09enemies%3A%20false%2C%20%2F%2F%20if%20the%20enemy%20index%20has%20been%20updated%20since%20the%20user%20pressed%20B%20for%20Blink%0A%09%09flame%3A%20new%20Date().getTime()%2C%20%2F%2F%20the%20time%20the%20flame%20was%20last%20updated%0A%09%09blink%3A%20%7Btime%3A%200%2C%20isActive%3A%20false%7D%0A%09%7D%3B%0A%09this.scrollPos%20%3D%20new%20Vector(0%2C%200)%3B%0A%0A%09this.bullets%20%3D%20%5B%5D%3B%0A%0A%09%2F%2F%20Enemies%20lay%20first%20in%20this.enemies%2C%20when%20they%20are%20shot%20they%20are%20moved%20to%20this.dying%0A%09this.enemies%20%3D%20%5B%5D%3B%0A%09this.dying%20%3D%20%5B%5D%3B%0A%09this.totalEnemies%20%3D%200%3B%0A%0A%09%2F%2F%20Particles%20are%20created%20when%20something%20is%20shot%0A%09this.particles%20%3D%20%5B%5D%3B%0A%0A%09%2F%2F%20things%20to%20shoot%20is%20everything%20textual%20and%20an%20element%20of%20type%20not%20specified%20in%20types%20AND%20not%20a%20navigation%20element%20(see%20further%20down)%0A%09function%20updateEnemyIndex()%20%7B%0A%09%09for%20(%20var%20i%20%3D%200%2C%20enemy%3B%20enemy%20%3D%20that.enemies%5Bi%5D%3B%20i%2B%2B%20)%0A%09%09%09removeClass(enemy%2C%20%22ASTEROIDSYEAHENEMY%22)%3B%0A%0A%09%09var%20all%20%3D%20document.body.getElementsByTagName('*')%3B%0A%09%09that.enemies%20%3D%20%5B%5D%3B%0A%09%09for%20(%20var%20i%20%3D%200%2C%20el%3B%20el%20%3D%20all%5Bi%5D%3B%20i%2B%2B%20)%20%7B%0A%09%09%09%2F%2F%20elements%20with%20className%20ASTEROIDSYEAH%20are%20part%20of%20the%20%22game%22%0A%09%09%09if%20(%20indexOf(ignoredTypes%2C%20el.tagName.toUpperCase())%20%3D%3D%20-1%20%26%26%20el.prefix%20!%3D%20'g_vml_'%20%26%26%20hasOnlyTextualChildren(el)%20%26%26%20el.className%20!%3D%20%22ASTEROIDSYEAH%22%20%26%26%20el.offsetHeight%20%3E%200%20)%20%7B%0A%09%09%09%09el.aSize%20%3D%20size(el)%3B%0A%09%09%09%09that.enemies.push(el)%3B%0A%0A%09%09%09%09addClass(el%2C%20%22ASTEROIDSYEAHENEMY%22)%3B%0A%0A%09%09%09%09%2F%2F%20this%20is%20only%20for%20enemycounting%0A%09%09%09%09if%20(%20!%20el.aAdded%20)%20%7B%0A%09%09%09%09%09el.aAdded%20%3D%20true%3B%0A%09%09%09%09%09that.totalEnemies%2B%2B%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%0A%09%7D%3B%0A%09updateEnemyIndex()%3B%0A%0A%09%2F%2F%20createFlames%20create%20the%20vectors%20for%20the%20flames%20of%20the%20ship%0A%09var%20createFlames%3B%0A%09(function%20()%20%7B%0A%09%09var%20rWidth%20%3D%20playerWidth%2C%0A%09%09%09rIncrease%20%3D%20playerWidth%20*%200.1%2C%0A%09%09%09yWidth%20%3D%20playerWidth%20*%200.6%2C%0A%09%09%09yIncrease%20%3D%20yWidth%20*%200.2%2C%0A%09%09%09halfR%20%3D%20rWidth%20%2F%202%2C%0A%09%09%09halfY%20%3D%20yWidth%20%2F%202%2C%0A%09%09%09halfPlayerHeight%20%3D%20playerHeight%20%2F%202%3B%0A%0A%09%09createFlames%20%3D%20function%20()%20%7B%0A%09%09%09%2F%2F%20Firstly%20create%20red%20flames%0A%09%09%09that.flame.r%20%3D%20%5B%5B-1%20*%20halfPlayerHeight%2C%20-1%20*%20halfR%5D%5D%3B%0A%09%09%09that.flame.y%20%3D%20%5B%5B-1%20*%20halfPlayerHeight%2C%20-1%20*%20halfY%5D%5D%3B%0A%0A%09%09%09for%20(%20var%20x%20%3D%200%3B%20x%20%3C%20rWidth%3B%20x%20%2B%3D%20rIncrease%20)%20%7B%0A%09%09%09%09that.flame.r.push(%5B-random(2%2C%207)%20-%20halfPlayerHeight%2C%20x%20-%20halfR%5D)%3B%0A%09%09%09%7D%0A%0A%09%09%09that.flame.r.push(%5B-1%20*%20halfPlayerHeight%2C%20halfR%5D)%3B%0A%0A%09%09%09%2F%2F%20...%20And%20now%20the%20yellow%20flames%0A%09%09%09for%20(%20var%20x%20%3D%200%3B%20x%20%3C%20yWidth%3B%20x%20%2B%3D%20yIncrease%20)%20%7B%0A%09%09%09%09that.flame.y.push(%5B-random(2%2C%207)%20-%20halfPlayerHeight%2C%20x%20-%20halfY%5D)%3B%0A%09%09%09%7D%0A%0A%09%09%09that.flame.y.push(%5B-1%20*%20halfPlayerHeight%2C%20halfY%5D)%3B%0A%09%09%7D%3B%0A%09%7D)()%3B%0A%0A%09createFlames()%3B%0A%0A%09%2F*%0A%09%09Math%20operations%0A%09*%2F%0A%0A%09function%20radians(deg)%20%7B%0A%09%09return%20deg%20*%200.0174532925%3B%0A%09%7D%3B%0A%0A%09function%20degrees(rad)%20%7B%0A%09%09return%20rad%20*%2057.2957795%3B%0A%09%7D%3B%0A%0A%09function%20random(from%2C%20to)%20%7B%0A%09%09return%20Math.floor(Math.random()%20*%20(to%20%2B%201)%20%2B%20from)%3B%0A%09%7D%3B%0A%0A%09%2F*%0A%09%09Misc%20operations%0A%09*%2F%0A%0A%09function%20code(name)%20%7B%0A%09%09var%20table%20%3D%20%7B'up'%3A%2038%2C%20'down'%3A%2040%2C%20'left'%3A%2037%2C%20'right'%3A%2039%2C%20'esc'%3A%2027%7D%3B%0A%09%09if%20(%20table%5Bname%5D%20)%20return%20table%5Bname%5D%3B%0A%09%09return%20name.charCodeAt(0)%3B%0A%09%7D%3B%0A%0A%09function%20boundsCheck(vec)%20%7B%0A%09%09if%20(%20vec.x%20%3E%20w%20)%0A%09%09%09vec.x%20%3D%200%3B%0A%09%09else%20if%20(%20vec.x%20%3C%200%20)%0A%09%09%09vec.x%20%3D%20w%3B%0A%0A%09%09if%20(%20vec.y%20%3E%20h%20)%0A%09%09%09vec.y%20%3D%200%3B%0A%09%09else%20if%20(%20vec.y%20%3C%200%20)%0A%09%09%09vec.y%20%3D%20h%3B%0A%09%7D%3B%0A%0A%09function%20size(element)%20%7B%0A%09%09var%20el%20%3D%20element%2C%20left%20%3D%200%2C%20top%20%3D%200%3B%0A%09%09do%20%7B%0A%09%09%09left%20%2B%3D%20el.offsetLeft%20%7C%7C%200%3B%0A%09%09%09top%20%2B%3D%20el.offsetTop%20%7C%7C%200%3B%0A%09%09%09el%20%3D%20el.offsetParent%3B%0A%09%09%7D%20while%20(el)%3B%0A%09%09return%20%7Bx%3A%20left%2C%20y%3A%20top%2C%20width%3A%20element.offsetWidth%20%7C%7C%2010%2C%20height%3A%20element.offsetHeight%20%7C%7C%2010%7D%3B%0A%09%7D%3B%0A%0A%09%2F%2F%20Taken%20from%3A%0A%09%2F%2F%20http%3A%2F%2Fwww.quirksmode.org%2Fblog%2Farchives%2F2005%2F10%2F_and_the_winner_1.html%0A%09function%20addEvent(%20obj%2C%20type%2C%20fn%20)%20%7B%0A%09%09if%20(obj.addEventListener)%0A%09%09%09obj.addEventListener(%20type%2C%20fn%2C%20false%20)%3B%0A%09%09else%20if%20(obj.attachEvent)%20%7B%0A%09%09%09obj%5B%22e%22%2Btype%2Bfn%5D%20%3D%20fn%3B%0A%09%09%09obj%5Btype%2Bfn%5D%20%3D%20function()%20%7B%20obj%5B%22e%22%2Btype%2Bfn%5D(%20window.event%20)%3B%20%7D%3B%0A%09%09%09obj.attachEvent(%20%22on%22%2Btype%2C%20obj%5Btype%2Bfn%5D%20)%3B%0A%09%09%7D%0A%09%7D%0A%0A%09function%20removeEvent(%20obj%2C%20type%2C%20fn%20)%20%7B%0A%09%09if%20(obj.removeEventListener)%0A%09%09%09obj.removeEventListener(%20type%2C%20fn%2C%20false%20)%3B%0A%09%09else%20if%20(obj.detachEvent)%20%7B%0A%09%09%09obj.detachEvent(%20%22on%22%2Btype%2C%20obj%5Btype%2Bfn%5D%20)%3B%0A%09%09%09obj%5Btype%2Bfn%5D%20%3D%20null%3B%0A%09%09%09obj%5B%22e%22%2Btype%2Bfn%5D%20%3D%20null%3B%0A%09%09%7D%0A%09%7D%0A%0A%09function%20arrayRemove(array%2C%20from%2C%20to)%20%7B%0A%09%09var%20rest%20%3D%20array.slice((to%20%7C%7C%20from)%20%2B%201%20%7C%7C%20array.length)%3B%0A%09%09array.length%20%3D%20from%20%3C%200%20%3F%20array.length%20%2B%20from%20%3A%20from%3B%0A%09%09return%20array.push.apply(array%2C%20rest)%3B%0A%09%7D%3B%0A%0A%09function%20applyVisibility(vis)%20%7B%0A%09%09for%20(%20var%20i%20%3D%200%2C%20p%3B%20p%20%3D%20window.ASTEROIDSPLAYERS%5Bi%5D%3B%20i%2B%2B%20)%20%7B%0A%09%09%09p.gameContainer.style.visibility%20%3D%20vis%3B%0A%09%09%7D%0A%09%7D%0A%0A%09function%20getElementFromPoint(x%2C%20y)%20%7B%0A%09%09%2F%2F%20hide%20canvas%20so%20it%20isn't%20picked%20up%0A%09%09applyVisibility('hidden')%3B%0A%0A%09%09var%20element%20%3D%20document.elementFromPoint(x%2C%20y)%3B%0A%0A%09%09if%20(%20!%20element%20)%20%7B%0A%09%09%09applyVisibility('visible')%3B%0A%09%09%09return%20false%3B%0A%09%09%7D%0A%0A%09%09if%20(%20element.nodeType%20%3D%3D%203%20)%0A%09%09%09element%20%3D%20element.parentNode%3B%0A%0A%09%09%2F%2F%20show%20the%20canvas%20again%2C%20hopefully%20it%20didn't%20blink%0A%09%09applyVisibility('visible')%3B%0A%09%09return%20element%3B%0A%09%7D%3B%0A%0A%09function%20addParticles(startPos)%20%7B%0A%09%09var%20time%20%3D%20new%20Date().getTime()%3B%0A%09%09var%20amount%20%3D%20maxParticles%3B%0A%09%09for%20(%20var%20i%20%3D%200%3B%20i%20%3C%20amount%3B%20i%2B%2B%20)%20%7B%0A%09%09%09that.particles.push(%7B%0A%09%09%09%09%2F%2F%20random%20direction%0A%09%09%09%09dir%3A%20(new%20Vector(Math.random()%20*%2020%20-%2010%2C%20Math.random()%20*%2020%20-%2010)).normalize()%2C%0A%09%09%09%09pos%3A%20startPos.cp()%2C%0A%09%09%09%09cameAlive%3A%20time%0A%09%09%09%7D)%3B%0A%09%09%7D%0A%09%7D%3B%0A%0A%09function%20setScore()%20%7B%0A%09%09that.points.innerHTML%20%3D%20window.ASTEROIDS.enemiesKilled%20*%2010%3B%0A%09%7D%3B%0A%0A%09function%20hasOnlyTextualChildren(element)%20%7B%0A%09%09if%20(%20element.offsetLeft%20%3C%20-100%20%26%26%20element.offsetWidth%20%3E%200%20%26%26%20element.offsetHeight%20%3E%200%20)%20return%20false%3B%0A%09%09if%20(%20indexOf(hiddenTypes%2C%20element.tagName)%20!%3D%20-1%20)%20return%20true%3B%0A%0A%09%09if%20(%20element.offsetWidth%20%3D%3D%200%20%26%26%20element.offsetHeight%20%3D%3D%200%20)%20return%20false%3B%0A%09%09for%20(%20var%20i%20%3D%200%3B%20i%20%3C%20element.childNodes.length%3B%20i%2B%2B%20)%20%7B%0A%09%09%09%2F%2F%20%3Cbr%20%2F%3E%20doesn't%20count...%20and%20empty%20elements%0A%09%09%09if%20(%0A%09%09%09%09indexOf(hiddenTypes%2C%20element.childNodes%5Bi%5D.tagName)%20%3D%3D%20-1%0A%09%09%09%09%26%26%20element.childNodes%5Bi%5D.childNodes.length%20!%3D%200%0A%09%09%09)%20return%20false%3B%0A%09%09%7D%0A%09%09return%20true%3B%0A%09%7D%3B%0A%0A%09function%20indexOf(arr%2C%20item%2C%20from)%7B%0A%09%09if%20(%20arr.indexOf%20)%20return%20arr.indexOf(item%2C%20from)%3B%0A%09%09var%20len%20%3D%20arr.length%3B%0A%09%09for%20(var%20i%20%3D%20(from%20%3C%200)%20%3F%20Math.max(0%2C%20len%20%2B%20from)%20%3A%20from%20%7C%7C%200%3B%20i%20%3C%20len%3B%20i%2B%2B)%7B%0A%09%09%09if%20(arr%5Bi%5D%20%3D%3D%3D%20item)%20return%20i%3B%0A%09%09%7D%0A%09%09return%20-1%3B%0A%09%7D%3B%0A%0A%09%2F%2F%20taken%20from%20MooTools%20Core%0A%09function%20addClass(element%2C%20className)%20%7B%0A%09%09if%20(%20element%20%26%26%20element.className%20%26%26%20element.className.indexOf%20%26%26%20element.className.indexOf(className)%20%3D%3D%20-1)%0A%09%09%09element.className%20%3D%20(element.className%20%2B%20'%20'%20%2B%20className).replace(%2F%5Cs%2B%2Fg%2C%20'%20').replace(%2F%5E%5Cs%2B%7C%5Cs%2B%24%2Fg%2C%20'')%3B%0A%09%7D%3B%0A%0A%09%2F%2F%20taken%20from%20MooTools%20Core%0A%09function%20removeClass(element%2C%20className)%20%7B%0A%09%09element.className%20%3D%20element.className.replace(new%20RegExp('(%5E%7C%5C%5Cs)'%20%2B%20className%20%2B%20'(%3F%3A%5C%5Cs%7C%24)')%2C%20'%241')%3B%0A%09%7D%3B%0A%0A%09function%20addStylesheet(selector%2C%20rules)%20%7B%0A%09%09var%20stylesheet%20%3D%20document.createElement('style')%3B%0A%09%09stylesheet.type%20%3D%20'text%2Fcss'%3B%0A%09%09stylesheet.rel%20%3D%20'stylesheet'%3B%0A%09%09stylesheet.id%20%3D%20'ASTEROIDSYEAHSTYLES'%3B%0A%09%09try%20%7B%0A%09%09%09stylesheet.innerHTML%20%3D%20selector%20%2B%20%22%7B%22%20%2B%20rules%20%2B%20%22%7D%22%3B%0A%09%09%7D%20catch%20(%20e%20)%20%7B%0A%09%09%09stylesheet.styleSheet.addRule(selector%2C%20rules)%3B%0A%09%09%7D%0A%09%09document.getElementsByTagName(%22head%22)%5B0%5D.appendChild(stylesheet)%3B%0A%09%7D%3B%0A%0A%09function%20removeStylesheet(name)%20%7B%0A%09%09var%20stylesheet%20%3D%20document.getElementById(name)%3B%0A%09%09if%20(%20stylesheet%20)%20%7B%0A%09%09%09stylesheet.parentNode.removeChild(stylesheet)%3B%0A%09%09%7D%0A%09%7D%3B%0A%0A%09%2F*%0A%09%09%3D%3D%20Setup%20%3D%3D%0A%09*%2F%0A%09this.gameContainer%20%3D%20document.createElement('div')%3B%0A%09this.gameContainer.className%20%3D%20'ASTEROIDSYEAH'%3B%0A%09document.body.appendChild(this.gameContainer)%3B%0A%0A%09this.canvas%20%3D%20document.createElement('canvas')%3B%0A%09this.canvas.setAttribute('width'%2C%20w)%3B%0A%09this.canvas.setAttribute('height'%2C%20h)%3B%0A%09this.canvas.className%20%3D%20'ASTEROIDSYEAH'%3B%0A%09with%20(%20this.canvas.style%20)%20%7B%0A%09%09width%20%3D%20w%20%2B%20%22px%22%3B%0A%09%09height%20%3D%20h%20%2B%20%22px%22%3B%0A%09%09position%20%3D%20%22fixed%22%3B%0A%09%09top%20%3D%20%220px%22%3B%0A%09%09left%20%3D%20%220px%22%3B%0A%09%09bottom%20%3D%20%220px%22%3B%0A%09%09right%20%3D%20%220px%22%3B%0A%09%09zIndex%20%3D%20%2210000%22%3B%0A%09%7D%0A%0A%09%2F%2F%20Is%20IE%0A%09if%20(%20typeof%20G_vmlCanvasManager%20!%3D%20'undefined'%20)%20%7B%0A%09%09this.canvas%20%3D%20G_vmlCanvasManager.initElement(this.canvas)%3B%0A%09%09if%20(%20!%20this.canvas.getContext%20)%20%7B%0A%09%09%09alert(%22So...%20you're%20using%20IE%3F%20%20Please%20join%20me%20at%20http%3A%2F%2Fgithub.com%2Ferkie%2Ferkie.github.com%20if%20you%20think%20you%20can%20help%22)%3B%0A%09%09%7D%0A%09%7D%20else%20%7B%0A%09%09if%20(%20!%20this.canvas.getContext%20)%20%7B%0A%09%09%09alert('This%20program%20does%20not%20yet%20support%20your%20browser.%20Please%20join%20me%20at%20http%3A%2F%2Fgithub.com%2Ferkie%2Ferkie.github.com%20if%20you%20think%20you%20can%20help')%3B%0A%09%09%7D%0A%09%7D%0A%0A%09addEvent(this.canvas%2C%20'mousedown'%2C%20function(e)%20%7B%0A%09%09e%20%3D%20e%20%7C%7C%20window.event%3B%0A%09%09var%20message%20%3D%20document.createElement('span')%3B%0A%09%09message.style.position%20%3D%20'absolute'%3B%0A%09%09message.style.border%20%3D%20'1px%20solid%20%23999'%3B%0A%09%09message.style.background%20%3D%20'white'%3B%0A%09%09message.style.color%20%3D%20%22black%22%3B%0A%09%09message.innerHTML%20%3D%20'Press%20Esc%20to%20quit'%3B%0A%09%09document.body.appendChild(message)%3B%0A%0A%09%09var%20x%20%3D%20e.pageX%20%7C%7C%20(e.clientX%20%2B%20document.documentElement.scrollLeft)%3B%0A%09%09var%20y%20%3D%20e.pageY%20%7C%7C%20(e.clientY%20%2B%20document.documentElement.scrollTop)%3B%0A%09%09message.style.left%20%3D%20x%20-%20message.offsetWidth%2F2%20%2B%20'px'%3B%0A%09%09message.style.top%20%3D%20y%20-%20message.offsetHeight%2F2%20%2B%20'px'%3B%0A%0A%09%09setTimeout(function()%20%7B%0A%09%09%09try%20%7B%0A%09%09%09%09message.parentNode.removeChild(message)%3B%0A%09%09%09%7D%20catch%20(%20e%20)%20%7B%7D%0A%09%09%7D%2C%201000)%3B%0A%09%7D)%3B%0A%0A%09var%20eventResize%20%3D%20function()%20%7B%0A%09%09if%20(%20!%20isIE%20)%20%7B%0A%09%09%09that.canvas.style.display%20%3D%20%22none%22%3B%0A%0A%09%09%09w%20%3D%20document.documentElement.clientWidth%3B%0A%09%09%09h%20%3D%20document.documentElement.clientHeight%3B%0A%0A%09%09%09that.canvas.setAttribute('width'%2C%20w)%3B%0A%09%09%09that.canvas.setAttribute('height'%2C%20h)%3B%0A%0A%09%09%09with%20(%20that.canvas.style%20)%20%7B%0A%09%09%09%09display%20%3D%20%22block%22%3B%0A%09%09%09%09width%20%3D%20w%20%2B%20%22px%22%3B%0A%09%09%09%09height%20%3D%20h%20%2B%20%22px%22%3B%0A%09%09%09%7D%0A%09%09%7D%20else%20%7B%0A%09%09%09w%20%3D%20document.documentElement.clientWidth%3B%0A%09%09%09h%20%3D%20document.documentElement.clientHeight%3B%0A%0A%09%09%09if%20(%20isIEQuirks%20)%20%7B%0A%09%09%09%09w%20%3D%20document.body.clientWidth%3B%0A%09%09%09%09h%20%3D%20document.body.clientHeight%3B%0A%09%09%09%7D%0A%0A%09%09%09that.canvas.setAttribute('width'%2C%20w)%3B%0A%09%09%09that.canvas.setAttribute('height'%2C%20h)%3B%0A%09%09%7D%0A%09%09forceChange%20%3D%20true%3B%0A%09%7D%3B%0A%09addEvent(window%2C%20'resize'%2C%20eventResize)%3B%0A%0A%09this.gameContainer.appendChild(this.canvas)%3B%0A%09this.ctx%20%3D%20this.canvas.getContext(%222d%22)%3B%0A%0A%09this.ctx.fillStyle%20%3D%20%22black%22%3B%0A%09this.ctx.strokeStyle%20%3D%20%22black%22%3B%0A%0A%09%2F%2F%20navigation%20wrapper%20element%0A%09if%20(%20!%20document.getElementById('ASTEROIDS-NAVIGATION')%20)%20%7B%0A%09%09this.navigation%20%3D%20document.createElement('div')%3B%0A%09%09this.navigation.id%20%3D%20%22ASTEROIDS-NAVIGATION%22%3B%0A%09%09this.navigation.className%20%3D%20%22ASTEROIDSYEAH%22%3B%0A%09%09with%20(%20this.navigation.style%20)%20%7B%0A%09%09%09fontFamily%20%3D%20%22Arial%2Csans-serif%22%3B%0A%09%09%09position%20%3D%20%22fixed%22%3B%0A%09%09%09zIndex%20%3D%20%2210001%22%3B%0A%09%09%09bottom%20%3D%20%220px%22%3B%0A%09%09%09right%20%3D%20%2210px%22%3B%0A%09%09%09textAlign%20%3D%20%22left%22%3B%0A%09%09%09background%20%3D%20'%23fff'%3B%0A%09%09%09color%20%3D%20'%23222'%3B%0A%09%09%09padding%20%3D%20'2px'%3B%0A%09%09%09border%20%3D%20'1px%20solid%20%23e1e1e1'%3B%0A%09%09%09boxShadow%20%3D%20'-2px%20-2px%2015px%20%23333'%3B%0A%09%09%09borderRadius%20%3D%20%223px%22%3B%0A%09%09%7D%0A%09%09%2F%2F%20this.gameContainer.appendChild(this.navigation)%3B%0A%0A%09%09%2F%2F%20points%0A%09%09this.points%20%3D%20document.createElement('span')%3B%0A%09%09this.points.id%20%3D%20'ASTEROIDS-POINTS'%3B%0A%09%09with%20(%20this.points.style%20)%20%7B%0A%09%09%09font%20%3D%20'28pt%20Arial%2C%20sans-serif'%3B%0A%09%09%09fontWeight%20%3D%20'bold'%3B%0A%09%09%09position%20%3D%20'relative'%3B%0A%09%09%09left%20%3D%20'20px'%3B%0A%09%09%7D%0A%09%09this.points.className%20%3D%20%22ASTEROIDSYEAH%22%3B%0A%09%09this.navigation.appendChild(this.points)%3B%0A%0A%09%09%2F%2F%20highscore%20link%0A%09%09this.highscoreLink%20%3D%20document.createElement('a')%3B%0A%09%09this.highscoreLink.className%20%3D%20%22ASTEROIDSYEAH%22%3B%0A%09%09var%20css%20%3D%20%7B%0A%09%09%09fontFamily%3A%20'Arial'%2C%0A%09%09%09fontSize%3A%20'15px'%2C%0A%09%09%09fontWeight%3A%20'normal'%2C%0A%09%09%09color%3A%20'%23fff'%2C%0A%09%09%09background%3A%20'%23333'%2C%0A%09%09%09textDecoration%3A%20'none'%2C%0A%09%09%09display%3A%20'inline'%2C%0A%09%09%09padding%3A%20'2px'%2C%0A%09%09%09borderRadius%3A%20'5px'%2C%0A%09%09%09position%3A%20'relative'%2C%0A%09%09%09left%3A%20'30px'%2C%0A%09%09%09top%3A%20'-3px'%0A%09%09%7D%0A%0A%09%09for%20(%20var%20key%20in%20css%20)%20if%20(%20css.hasOwnProperty(key)%20)%0A%09%09%20%20this.highscoreLink.style%5Bkey%5D%20%3D%20css%5Bkey%5D%3B%0A%0A%09%09this.highscoreLink.href%20%3D%20'%23'%3B%0A%09%09this.highscoreLink.innerHTML%20%3D%20%22Submit%20highscore%22%3B%0A%09%09%2F%2F%20this.navigation.appendChild(this.highscoreLink)%3B%0A%0A%0A%09%09%2F%2F%20credits%20for%20kickass%0A%09%09this.credits%20%3D%20document.createElement('div')%3B%0A%09%09this.credits.innerHTML%20%3D%20'%3Cdiv%20style%3D%22padding%3A%2015px%2020px%200%22%3E%3Cspan%20style%3D%22color%3A%20red%3B%20font-size%3A%20150%25%22%3E%E2%99%A5%3C%2Fspan%3E%20this%20asteroids%20game%3F%20%3Cbr%3E%3Cspan%20style%3D%22margin-top%3A%2010px%3B%20font-size%3A%20smaller%3B%20color%3A%20%23666%22%3EIt%5C's%20made%20by%20the%20awesome%20folks%20of%20%3Ca%20target%3D%22_blank%22%20href%3D%22http%3A%2F%2Fkickassapp.com%22%3EKICK%20ASS%3C%2Fa%3E%20App.%20%3Cbr%3ECheckout%20their%20game%20in%20the%20%3Ca%20href%3D%22http%3A%2F%2Fitunes.apple.com%2Fus%2Fapp%2Fkick-ass-destroy-the-web%2Fid436623109%3Fmt%3D8%22%20target%3D%22_blank%22%3EApp%20Store%3C%2Fa%3E.%3C%2Fspan%3E%3C%2Fdiv%3E'%3B%0A%09%09this.navigation.appendChild(this.credits)%3B%0A%0A%09%09this.highscoreLink.onclick%20%3D%20function()%20%7B%0A%09%09%09if%20(%20!%20that.highscores%20)%20%7B%0A%09%09%09%09that.highscores%20%3D%20new%20Highscores()%3B%0A%09%09%09%7D%0A%0A%09%09%20%20that.highscores.show()%3B%0A%09%09%09return%20false%3B%0A%09%09%7D%3B%0A%09%7D%20else%20%7B%0A%09%09this.navigation%20%3D%20document.getElementById('ASTEROIDS-NAVIGATION')%3B%0A%09%09this.points%20%3D%20document.getElementById('ASTEROIDS-POINTS')%3B%0A%09%7D%0A%0A%09%2F%2F%20Because%20IE%20quirks%20does%20not%20understand%20position%3A%20fixed%20we%20set%20to%20absolute%20and%20just%20reposition%20it%20everything%20frame%0A%09if%20(%20isIEQuirks%20)%20%7B%0A%09%09this.gameContainer.style.position%20%3D%0A%09%09%09this.canvas.style.position%20%3D%0A%09%09%09this.navigation.style.position%0A%09%09%09%09%3D%20%22absolute%22%3B%0A%09%7D%0A%0A%09setScore()%3B%0A%09%2F%2F%20For%20ie%0A%09if%20(%20typeof%20G_vmlCanvasManager%20!%3D%20'undefined'%20)%20%7B%0A%09%09var%20children%20%3D%20this.canvas.getElementsByTagName('*')%3B%0A%09%09for%20(%20var%20i%20%3D%200%2C%20c%3B%20c%20%3D%20children%5Bi%5D%3B%20i%2B%2B%20)%0A%09%09%09addClass(c%2C%20'ASTEROIDSYEAH')%3B%0A%09%7D%0A%0A%09%2F*%0A%09%09%3D%3D%20Events%20%3D%3D%0A%09*%2F%0A%0A%09var%20eventKeydown%20%3D%20function(event)%20%7B%0A%09%09event%20%3D%20event%20%7C%7C%20window.event%3B%0A%09%09if%20(%20event.ctrlKey%20%7C%7C%20event.shiftKey%20)%0A%09%09%09return%3B%0A%09%09that.keysPressed%5Bevent.keyCode%5D%20%3D%20true%3B%0A%0A%09%09switch%20(%20event.keyCode%20)%20%7B%0A%09%09%09case%20code('%20')%3A%0A%09%09%09%09that.firedAt%20%3D%201%3B%0A%09%09%09break%3B%0A%09%09%7D%0A%0A%09%09%2F%2F%20check%20here%20so%20we%20can%20stop%20propagation%20appropriately%0A%09%09if%20(%20indexOf(%5Bcode('up')%2C%20code('down')%2C%20code('right')%2C%20code('left')%2C%20code('%20')%2C%20code('B')%2C%20code('W')%2C%20code('A')%2C%20code('S')%2C%20code('D')%5D%2C%20event.keyCode)%20!%3D%20-1%20)%20%7B%0A%09%09%09if%20(%20event.ctrlKey%20%7C%7C%20event.shiftKey%20)%0A%09%09%09%09return%3B%0A%0A%09%09%09if%20(%20event.preventDefault%20)%0A%09%09%09%09event.preventDefault()%3B%0A%09%09%09if%20(%20event.stopPropagation)%0A%09%09%09%09event.stopPropagation()%3B%0A%09%09%09event.returnValue%20%3D%20false%3B%0A%09%09%09event.cancelBubble%20%3D%20true%3B%0A%09%09%09return%20false%3B%0A%09%09%7D%0A%09%7D%3B%0A%09addEvent(document%2C%20'keydown'%2C%20eventKeydown)%3B%0A%0A%09var%20eventKeypress%20%3D%20function(event)%20%7B%0A%09%09event%20%3D%20event%20%7C%7C%20window.event%3B%0A%09%09if%20(%20indexOf(%5Bcode('up')%2C%20code('down')%2C%20code('right')%2C%20code('left')%2C%20code('%20')%2C%20code('W')%2C%20code('A')%2C%20code('S')%2C%20code('D')%5D%2C%20event.keyCode%20%7C%7C%20event.which)%20!%3D%20-1%20)%20%7B%0A%09%09%09if%20(%20event.ctrlKey%20%7C%7C%20event.shiftKey%20)%0A%09%09%09%09return%3B%0A%0A%09%09%09if%20(%20event.preventDefault%20)%0A%09%09%09%09event.preventDefault()%3B%0A%09%09%09if%20(%20event.stopPropagation%20)%0A%09%09%09%09event.stopPropagation()%3B%0A%09%09%09event.returnValue%20%3D%20false%3B%0A%09%09%09event.cancelBubble%20%3D%20true%3B%0A%09%09%09return%20false%3B%0A%09%09%7D%0A%09%7D%3B%0A%09addEvent(document%2C%20'keypress'%2C%20eventKeypress)%3B%0A%0A%09var%20eventKeyup%20%3D%20function(event)%20%7B%0A%09%09event%20%3D%20event%20%7C%7C%20window.event%3B%0A%09%09that.keysPressed%5Bevent.keyCode%5D%20%3D%20false%3B%0A%0A%09%09if%20(%20indexOf(%5Bcode('up')%2C%20code('down')%2C%20code('right')%2C%20code('left')%2C%20code('%20')%2C%20code('B')%2C%20code('W')%2C%20code('A')%2C%20code('S')%2C%20code('D')%5D%2C%20event.keyCode)%20!%3D%20-1%20)%20%7B%0A%09%09%09if%20(%20event.preventDefault%20)%0A%09%09%09%09event.preventDefault()%3B%0A%09%09%09if%20(%20event.stopPropagation%20)%0A%09%09%09%09event.stopPropagation()%3B%0A%09%09%09event.returnValue%20%3D%20false%3B%0A%09%09%09event.cancelBubble%20%3D%20true%3B%0A%09%09%09return%20false%3B%0A%09%09%7D%0A%09%7D%3B%0A%09addEvent(document%2C%20'keyup'%2C%20eventKeyup)%3B%0A%0A%09%2F*%0A%09%09Context%20operations%0A%09*%2F%0A%0A%09this.ctx.clear%20%3D%20function()%20%7B%0A%09%09this.clearRect(0%2C%200%2C%20w%2C%20h)%3B%0A%09%7D%3B%0A%0A%09this.ctx.clear()%3B%0A%0A%09this.ctx.drawLine%20%3D%20function(xFrom%2C%20yFrom%2C%20xTo%2C%20yTo)%20%7B%0A%09%09this.beginPath()%3B%0A%09%09this.moveTo(xFrom%2C%20yFrom)%3B%0A%09%09this.lineTo(xTo%2C%20yTo)%3B%0A%09%09this.lineTo(xTo%20%2B%201%2C%20yTo%20%2B%201)%3B%0A%09%09this.closePath()%3B%0A%09%09this.fill()%3B%0A%09%7D%3B%0A%0A%09this.ctx.tracePoly%20%3D%20function(verts)%20%7B%0A%09%09this.beginPath()%3B%0A%09%09this.moveTo(verts%5B0%5D%5B0%5D%2C%20verts%5B0%5D%5B1%5D)%3B%0A%09%09for%20(%20var%20i%20%3D%201%3B%20i%20%3C%20verts.length%3B%20i%2B%2B%20)%0A%09%09%09this.lineTo(verts%5Bi%5D%5B0%5D%2C%20verts%5Bi%5D%5B1%5D)%3B%0A%09%09this.closePath()%3B%0A%09%7D%3B%0A%0A%09var%20THEPLAYER%20%3D%20false%3B%0A%09if%20(%20window.KICKASSIMG%20)%20%7B%0A%09%09THEPLAYER%20%3D%20document.createElement('img')%3B%0A%09%09THEPLAYER.src%20%3D%20window.KICKASSIMG%3B%0A%09%7D%0A%0A%09this.ctx.drawPlayer%20%3D%20function()%20%7B%0A%09%09if%20(%20!%20THEPLAYER%20)%20%7B%0A%09%09%09this.save()%3B%0A%09%09%09this.translate(that.pos.x%2C%20that.pos.y)%3B%0A%09%09%09this.rotate(that.dir.angle())%3B%0A%09%09%09this.tracePoly(playerVerts)%3B%0A%09%09%09this.fillStyle%20%3D%20%22white%22%3B%0A%09%09%09this.fill()%3B%0A%09%09%09this.tracePoly(playerVerts)%3B%0A%09%09%09this.stroke()%3B%0A%09%09%09this.restore()%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09this.save()%3B%0A%09%09%09this.translate(that.pos.x%2C%20that.pos.y)%3B%0A%09%09%09this.rotate(that.dir.angle()%2BMath.PI%2F2)%3B%0A%09%09%09this.drawImage(THEPLAYER%2C%20-THEPLAYER.width%2F2%2C%20-THEPLAYER.height%2F2)%3B%0A%09%09%09this.restore()%3B%0A%09%09%7D%0A%09%7D%3B%0A%0A%09var%20PI_SQ%20%3D%20Math.PI*2%3B%0A%0A%09this.ctx.drawBullets%20%3D%20function(bullets)%20%7B%0A%09%09for%20(%20var%20i%20%3D%200%3B%20i%20%3C%20bullets.length%3B%20i%2B%2B%20)%20%7B%0A%09%09%09this.beginPath()%3B%0A%09%09%09this.arc(bullets%5Bi%5D.pos.x%2C%20bullets%5Bi%5D.pos.y%2C%20bulletRadius%2C%200%2C%20PI_SQ%2C%20true)%3B%0A%09%09%09this.closePath()%3B%0A%09%09%09this.fill()%3B%0A%09%09%7D%0A%09%7D%3B%0A%0A%09var%20randomParticleColor%20%3D%20function()%20%7B%0A%09%09return%20(%5B'red'%2C%20'yellow'%5D)%5Brandom(0%2C%201)%5D%3B%0A%09%7D%3B%0A%0A%09this.ctx.drawParticles%20%3D%20function(particles)%20%7B%0A%09%09var%20oldColor%20%3D%20this.fillStyle%3B%0A%0A%09%09for%20(%20var%20i%20%3D%200%3B%20i%20%3C%20particles.length%3B%20i%2B%2B%20)%20%7B%0A%09%09%09this.fillStyle%20%3D%20randomParticleColor()%3B%0A%09%09%09this.drawLine(particles%5Bi%5D.pos.x%2C%20particles%5Bi%5D.pos.y%2C%20particles%5Bi%5D.pos.x%20-%20particles%5Bi%5D.dir.x%20*%2010%2C%20particles%5Bi%5D.pos.y%20-%20particles%5Bi%5D.dir.y%20*%2010)%3B%0A%09%09%7D%0A%0A%09%09this.fillStyle%20%3D%20oldColor%3B%0A%09%7D%3B%0A%0A%09this.ctx.drawFlames%20%3D%20function(flame)%20%7B%0A%09%09if%20(%20THEPLAYER%20)%20return%3B%0A%0A%09%09this.save()%3B%0A%0A%09%09this.translate(that.pos.x%2C%20that.pos.y)%3B%0A%09%09this.rotate(that.dir.angle())%3B%0A%0A%09%09var%20oldColor%20%3D%20this.strokeStyle%3B%0A%09%09this.strokeStyle%20%3D%20%22red%22%3B%0A%09%09this.tracePoly(flame.r)%3B%0A%09%09this.stroke()%3B%0A%0A%09%09this.strokeStyle%20%3D%20%22yellow%22%3B%0A%09%09this.tracePoly(flame.y)%3B%0A%09%09this.stroke()%3B%0A%0A%09%09this.strokeStyle%20%3D%20oldColor%3B%0A%09%09this.restore()%3B%0A%09%7D%3B%0A%0A%09%2F*%0A%09%09Game%20loop%0A%09*%2F%0A%0A%09%2F%2F%20Attempt%20to%20focus%20window%20if%20possible%2C%20so%20keyboard%20events%20are%20posted%20to%20us%0A%09try%20%7B%0A%09%09window.focus()%3B%0A%09%7D%20catch%20(%20e%20)%20%7B%7D%0A%0A%09addParticles(this.pos)%3B%0A%09addClass(document.body%2C%20'ASTEROIDSYEAH')%3B%0A%0A%09var%20isRunning%20%3D%20true%3B%0A%09var%20lastUpdate%20%3D%20new%20Date().getTime()%3B%0A%09var%20forceChange%20%3D%20false%3B%0A%0A%09this.update%20%3D%20function()%20%7B%0A%09%09%2F%2F%20%3D%3D%0A%09%09%2F%2F%20logic%0A%09%09%2F%2F%20%3D%3D%0A%09%09var%20nowTime%20%3D%20new%20Date().getTime()%3B%0A%09%09var%20tDelta%20%3D%20(nowTime%20-%20lastUpdate)%20%2F%201000%3B%0A%09%09lastUpdate%20%3D%20nowTime%3B%0A%0A%09%09%2F%2F%20update%20flame%20and%20timer%20if%20needed%0A%09%09var%20drawFlame%20%3D%20false%3B%0A%09%09if%20(%20nowTime%20-%20this.updated.flame%20%3E%2050%20)%20%7B%0A%09%09%09createFlames()%3B%0A%09%09%09this.updated.flame%20%3D%20nowTime%3B%0A%09%09%7D%0A%0A%09%09this.scrollPos.x%20%3D%20window.pageXOffset%20%7C%7C%20document.documentElement.scrollLeft%3B%0A%09%09this.scrollPos.y%20%3D%20window.pageYOffset%20%7C%7C%20document.documentElement.scrollTop%3B%0A%0A%09%09%2F%2F%20update%20player%0A%09%09%2F%2F%20move%20forward%0A%09%09if%20(%20(this.keysPressed%5Bcode('up')%5D)%20%7C%7C%20(this.keysPressed%5Bcode('W')%5D)%20)%20%7B%0A%09%09%09this.vel.add(this.dir.mulNew(acc%20*%20tDelta))%3B%0A%0A%09%09%09drawFlame%20%3D%20true%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09%2F%2F%20decrease%20speed%20of%20player%0A%09%09%09this.vel.mul(0.96)%3B%0A%09%09%7D%0A%0A%09%09%2F%2F%20rotate%20counter-clockwise%0A%09%09if%20(%20(this.keysPressed%5Bcode('left')%5D)%20%7C%7C%20(this.keysPressed%5Bcode('A')%5D)%20)%20%7B%0A%09%09%09forceChange%20%3D%20true%3B%0A%09%09%09this.dir.rotate(radians(rotSpeed%20*%20tDelta%20*%20-1))%3B%0A%09%09%7D%0A%0A%09%09%2F%2F%20rotate%20clockwise%0A%09%09if%20(%20(this.keysPressed%5Bcode('right')%5D)%20%7C%7C%20(this.keysPressed%5Bcode('D')%5D)%20)%20%7B%0A%09%09%09forceChange%20%3D%20true%3B%0A%09%09%09this.dir.rotate(radians(rotSpeed%20*%20tDelta))%3B%0A%09%09%7D%0A%0A%09%09%2F%2F%20fire%0A%09%09if%20(%20this.keysPressed%5Bcode('%20')%5D%20%26%26%20nowTime%20-%20this.firedAt%20%3E%20timeBetweenFire%20)%20%7B%0A%09%09%09this.bullets.unshift(%7B%0A%09%09%09%09'dir'%3A%20this.dir.cp()%2C%0A%09%09%09%09'pos'%3A%20this.pos.cp()%2C%0A%09%09%09%09'startVel'%3A%20this.vel.cp()%2C%0A%09%09%09%09'cameAlive'%3A%20nowTime%0A%09%09%09%7D)%3B%0A%0A%09%09%09this.firedAt%20%3D%20nowTime%3B%0A%0A%09%09%09if%20(%20this.bullets.length%20%3E%20maxBullets%20)%20%7B%0A%09%09%09%09this.bullets.pop()%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09%2F%2F%20add%20blink%0A%09%09if%20(%20this.keysPressed%5Bcode('B')%5D%20)%20%7B%0A%09%09%09if%20(%20!%20this.updated.enemies%20)%20%7B%0A%09%09%09%09updateEnemyIndex()%3B%0A%09%09%09%09this.updated.enemies%20%3D%20true%3B%0A%09%09%09%7D%0A%0A%09%09%09forceChange%20%3D%20true%3B%0A%0A%09%09%09this.updated.blink.time%20%2B%3D%20tDelta%20*%201000%3B%0A%09%09%09if%20(%20this.updated.blink.time%20%3E%20timeBetweenBlink%20)%20%7B%0A%09%09%09%09this.toggleBlinkStyle()%3B%0A%09%09%09%09this.updated.blink.time%20%3D%200%3B%0A%09%09%09%7D%0A%09%09%7D%20else%20%7B%0A%09%09%09this.updated.enemies%20%3D%20false%3B%0A%09%09%7D%0A%0A%09%09if%20(%20this.keysPressed%5Bcode('esc')%5D%20)%20%7B%0A%09%09%09destroy.apply(this)%3B%0A%09%09%09return%3B%0A%09%09%7D%0A%0A%09%09%2F%2F%20cap%20speed%0A%09%09if%20(%20this.vel.len()%20%3E%20maxSpeed%20)%20%7B%0A%09%09%09this.vel.setLength(maxSpeed)%3B%0A%09%09%7D%0A%0A%09%09%2F%2F%20add%20velocity%20to%20player%20(physics)%0A%09%09this.pos.add(this.vel.mulNew(tDelta))%3B%0A%0A%09%09%2F%2F%20check%20bounds%20X%20of%20player%2C%20if%20we%20go%20outside%20we%20scroll%20accordingly%0A%09%09if%20(%20this.pos.x%20%3E%20w%20)%20%7B%0A%09%09%09window.scrollTo(this.scrollPos.x%20%2B%2050%2C%20this.scrollPos.y)%3B%0A%09%09%09this.pos.x%20%3D%200%3B%0A%09%09%7D%20else%20if%20(%20this.pos.x%20%3C%200%20)%20%7B%0A%09%09%09window.scrollTo(this.scrollPos.x%20-%2050%2C%20this.scrollPos.y)%3B%0A%09%09%09this.pos.x%20%3D%20w%3B%0A%09%09%7D%0A%0A%09%09%2F%2F%20check%20bounds%20Y%0A%09%09if%20(%20this.pos.y%20%3E%20h%20)%20%7B%0A%09%09%09window.scrollTo(this.scrollPos.x%2C%20this.scrollPos.y%20%2B%20h%20*%200.75)%3B%0A%09%09%09this.pos.y%20%3D%200%3B%0A%09%09%7D%20else%20if%20(%20this.pos.y%20%3C%200%20)%20%7B%0A%09%09%09window.scrollTo(this.scrollPos.x%2C%20this.scrollPos.y%20-%20h%20*%200.75)%3B%0A%09%09%09this.pos.y%20%3D%20h%3B%0A%09%09%7D%0A%0A%09%09%2F%2F%20update%20positions%20of%20bullets%0A%09%09for%20(%20var%20i%20%3D%20this.bullets.length%20-%201%3B%20i%20%3E%3D%200%3B%20i--%20)%20%7B%0A%09%09%09%2F%2F%20bullets%20should%20only%20live%20for%202%20seconds%0A%09%09%09if%20(%20nowTime%20-%20this.bullets%5Bi%5D.cameAlive%20%3E%202000%20)%20%7B%0A%09%09%09%09this.bullets.splice(i%2C%201)%3B%0A%09%09%09%09forceChange%20%3D%20true%3B%0A%09%09%09%09continue%3B%0A%09%09%09%7D%0A%0A%09%09%09var%20bulletVel%20%3D%20this.bullets%5Bi%5D.dir.setLengthNew(bulletSpeed%20*%20tDelta).add(this.bullets%5Bi%5D.startVel.mulNew(tDelta))%3B%0A%0A%09%09%09this.bullets%5Bi%5D.pos.add(bulletVel)%3B%0A%09%09%09boundsCheck(this.bullets%5Bi%5D.pos)%3B%0A%0A%09%09%09%2F%2F%20check%20collisions%0A%09%09%09var%20murdered%20%3D%20getElementFromPoint(this.bullets%5Bi%5D.pos.x%2C%20this.bullets%5Bi%5D.pos.y)%3B%0A%09%09%09if%20(%0A%09%09%09%09murdered%20%26%26%20murdered.tagName%20%26%26%0A%09%09%09%09indexOf(ignoredTypes%2C%20murdered.tagName.toUpperCase())%20%3D%3D%20-1%20%26%26%0A%09%09%09%09hasOnlyTextualChildren(murdered)%20%26%26%20murdered.className%20!%3D%20%22ASTEROIDSYEAH%22%0A%09%09%09)%20%7B%0A%09%09%09%09didKill%20%3D%20true%3B%0A%09%09%09%09addParticles(this.bullets%5Bi%5D.pos)%3B%0A%09%09%09%09this.dying.push(murdered)%3B%0A%0A%09%09%09%09this.bullets.splice(i%2C%201)%3B%0A%09%09%09%09continue%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09if%20(this.dying.length)%20%7B%0A%09%09%09for%20(%20var%20i%20%3D%20this.dying.length%20-%201%3B%20i%20%3E%3D%200%3B%20i--%20)%20%7B%0A%09%09%09%09try%20%7B%0A%09%09%09%09%09%2F%2F%20If%20we%20have%20multiple%20spaceships%20it%20might%20have%20already%20been%20removed%0A%09%09%09%09%09if%20(%20this.dying%5Bi%5D.parentNode%20)%0A%09%09%09%09%09%09window.ASTEROIDS.enemiesKilled%2B%2B%3B%0A%0A%09%09%09%09%09this.dying%5Bi%5D.parentNode.removeChild(this.dying%5Bi%5D)%3B%0A%09%09%09%09%7D%20catch%20(%20e%20)%20%7B%7D%0A%09%09%09%7D%0A%0A%09%09%09setScore()%3B%0A%09%09%09this.dying%20%3D%20%5B%5D%3B%0A%09%09%7D%0A%0A%09%09%2F%2F%20update%20particles%20position%0A%09%09for%20(%20var%20i%20%3D%20this.particles.length%20-%201%3B%20i%20%3E%3D%200%3B%20i--%20)%20%7B%0A%09%09%09this.particles%5Bi%5D.pos.add(this.particles%5Bi%5D.dir.mulNew(particleSpeed%20*%20tDelta%20*%20Math.random()))%3B%0A%0A%09%09%09if%20(%20nowTime%20-%20this.particles%5Bi%5D.cameAlive%20%3E%201000%20)%20%7B%0A%09%09%09%09this.particles.splice(i%2C%201)%3B%0A%09%09%09%09forceChange%20%3D%20true%3B%0A%09%09%09%09continue%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09%2F%2F%20%3D%3D%0A%09%09%2F%2F%20drawing%0A%09%09%2F%2F%20%3D%3D%0A%0A%09%09%2F%2F%20Reposition%20the%20canvas%20area%20for%20IE%20quirks%20because%20it%20does%20not%20understand%20position%3A%20fixed%0A%09%09if%20(%20isIEQuirks%20)%20%7B%0A%09%09%09this.gameContainer.style.left%20%3D%0A%09%09%09%09this.canvas.style.left%20%3D%20document.documentElement.scrollLeft%20%2B%20%22px%22%3B%0A%09%09%09this.gameContainer.style.top%20%3D%0A%09%09%09%09this.canvas.style.top%20%3D%20document.documentElement.scrollTop%20%2B%20%22px%22%3B%0A%0A%09%09%09this.navigation.style.right%20%3D%20%2210px%22%3B%0A%09%09%09this.navigation.style.top%0A%09%09%09%09%3D%20document.documentElement.scrollTop%20%2B%20document.body.clientHeight%20-%20this.navigation.clientHeight%20-%2010%20%2B%20%22px%22%3B%0A%09%09%7D%0A%0A%09%09%2F%2F%20clear%0A%09%09if%20(%20forceChange%20%7C%7C%20this.bullets.length%20!%3D%200%20%7C%7C%20this.particles.length%20!%3D%200%20%7C%7C%20!%20this.pos.is(this.lastPos)%20%7C%7C%20this.vel.len()%20%3E%200%20)%20%7B%0A%09%09%09this.ctx.clear()%3B%0A%0A%09%09%09%2F%2F%20draw%20player%0A%09%09%09this.ctx.drawPlayer()%3B%0A%0A%09%09%09%2F%2F%20draw%20flames%0A%09%09%09if%20(%20drawFlame%20)%0A%09%09%09%09this.ctx.drawFlames(that.flame)%3B%0A%0A%09%09%09%2F%2F%20draw%20bullets%0A%09%09%09if%20(this.bullets.length)%20%7B%0A%09%09%09%09this.ctx.drawBullets(this.bullets)%3B%0A%09%09%09%7D%0A%0A%09%09%09%2F%2F%20draw%20particles%0A%09%09%09if%20(this.particles.length)%20%7B%0A%09%09%09%09this.ctx.drawParticles(this.particles)%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%09this.lastPos%20%3D%20this.pos%3B%0A%09%09forceChange%20%3D%20false%3B%0A%09%7D%3B%0A%0A%09%2F%2F%20Start%20timer%0A%09var%20updateFunc%20%3D%20function()%20%7B%0A%09%09%2F%2Ftry%20%7B%0A%09%09%09that.update.call(that)%3B%0A%09%09%2F*%7D%0A%09%09catch%20(e)%20%7B%0A%09%09%09clearInterval(interval)%3B%0A%09%09%09throw%20e%3B%0A%09%09%7D*%2F%0A%09%7D%3B%0A%09var%20interval%20%3D%20setInterval(updateFunc%2C%201000%20%2F%20FPS)%3B%0A%0A%09function%20destroy()%20%7B%0A%09%09clearInterval(interval)%3B%0A%09%09removeEvent(document%2C%20'keydown'%2C%20eventKeydown)%3B%0A%09%09removeEvent(document%2C%20'keypress'%2C%20eventKeypress)%3B%0A%09%09removeEvent(document%2C%20'keyup'%2C%20eventKeyup)%3B%0A%09%09removeEvent(window%2C%20'resize'%2C%20eventResize)%3B%0A%09%09isRunning%20%3D%20false%3B%0A%09%09removeStylesheet(%22ASTEROIDSYEAHSTYLES%22)%3B%0A%09%09removeClass(document.body%2C%20'ASTEROIDSYEAH')%3B%0A%09%09if%20(%20this.highscores%20)%0A%09%09%09this.highscores.hide()%3B%0A%09%09this.gameContainer.parentNode.removeChild(this.gameContainer)%3B%0A%09%7D%3B%0A%7D%0A%0Aif%20(%20!%20window.ASTEROIDSPLAYERS%20)%0A%09window.ASTEROIDSPLAYERS%20%3D%20%5B%5D%3B%0A%0Aif%20(%20window.ActiveXObject%20%26%26%20!%20document.createElement('canvas').getContext%20)%20%7B%0A%09try%20%7B%0A%09%09var%20xamlScript%20%3D%20document.createElement('script')%3B%0A%09%09xamlScript.setAttribute('type'%2C%20'text%2Fxaml')%3B%0A%09%09xamlScript.textContent%20%3D%20'%3C%3Fxml%20version%3D%221.0%22%3F%3E%3CCanvas%20xmlns%3D%22http%3A%2F%2Fschemas.microsoft.com%2Fclient%2F2007%22%3E%3C%2FCanvas%3E'%3B%0A%09%09document.getElementsByTagName('head')%5B0%5D.appendChild(xamlScript)%3B%0A%09%7D%20catch%20(%20e%20)%20%7B%7D%0A%0A%09var%20script%20%3D%20document.createElement(%22script%22)%3B%0A%09script.setAttribute('type'%2C%20'text%2Fjavascript')%3B%0A%09script.onreadystatechange%20%3D%20function()%20%7B%0A%09%09if%20(%20script.readyState%20%3D%3D%20'loaded'%20%7C%7C%20script.readyState%20%3D%3D%20'complete'%20)%20%7B%0A%09%09%09if%20(%20typeof%20G_vmlCanvasManager%20!%3D%20%22undefined%22%20)%0A%09%09%09%09window.ASTEROIDSPLAYERS%5Bwindow.ASTEROIDSPLAYERS.length%5D%20%3D%20new%20Asteroids()%3B%0A%09%09%7D%0A%09%7D%3B%0A%09script.src%20%3D%20%22http%3A%2F%2Ferkie.github.com%2Fexcanvas.js%22%3B%0A%09document.getElementsByTagName('head')%5B0%5D.appendChild(script)%3B%0A%7D%0Aelse%20window.ASTEROIDSPLAYERS%5Bwindow.ASTEROIDSPLAYERS.length%5D%20%3D%20new%20Asteroids()%3B%0A%0Avar%20trackingFrame%20%3D%20document.createElement('iframe')%3B%0AtrackingFrame.src%20%3D%20'http%3A%2F%2Ferkie.github.com%2Ftracking.html'%3B%0AtrackingFrame.frameborder%20%3D%20'0'%3B%0AtrackingFrame.style.position%20%3D%20'absolute'%3B%0AtrackingFrame.style.top%20%3D%20%22-1000px%22%3B%0AtrackingFrame.style.height%20%3D%20%220px%22%3B%0AtrackingFrame.style.width%20%3D%20%220px%22%3B%0A%0Adocument.getElementsByTagName('body')%5B0%5D.appendChild(trackingFrame)%3B%0A%0A%7D)()%3B%7D)()%3B">asteriods</a>




<a href="javascript:(function() %7Bconst CHARACTER%3D%7BBOTTOM%3A""%2CTOP%3A""%2COVER%3A""%2CUNDER%3A""%2CCRASH%3A""%7D%2CBOX%3D%7BBOTTOM%3A""%2CTOP%3A""%7D%2CMISC%3D%7BFLAG_DARK%3A""%2CFLAG_LIGHT%3A""%2CPLAY%3A""%2CSTAR_DARK%3A""%2CSTAR_LIGHT%3A""%7D%2CCOLLISION%3D"collision"%2CJUMP_TIMEOUT%3D-1%2CJUMP_LENGTH%3D3%2CDELAY_LOOP%3D210%2CDELAY_INITIAL%3D1e3%2CMAPS%3D%7B1%3A"%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80"%2C2%3A"%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80"%2C3%3A"%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80%E2%80%80"%7D%2CGAME_URL%3Dnew URL(window.location.href)%2CMAP%3DGAME_URL.searchParams.get("map")in MAPS%3FGAME_URL.searchParams.get("map")%3A1%2CDEBUG%3Dnull!%3D!!GAME_URL.searchParams.get("debug")%3Blet map%3DloadMap(MAP)%2Cjump%3D-1%2Cticks%3D0%2Cplaying%3D!1%2Cwin%3D!0%3Bconst commands%3D%7BArrowUp%3A()%3D>%7Bif(!playing)return commands.s()%3Bjump<%3D-1%26%26(jump%3D3)%7D%2Cs%3Aasync()%3D>%7Bplaying%7C%7C(faviconize(""%2C0)%2CloopGame())%7D%2C" "%3A()%3D>commands.ArrowUp()%2Cr%3Aasync()%3D>%7Bplaying%3D!1%2Cawait dotDotDot("Restarting")%2Clocation.reload()%7D%2Cm%3Aasync()%3D>%7Bplaying%3D!1%2CclearStorage()%2Cawait dotDotDot("Clearing")%2Clocation.reload()%7D%7D%3Basync function loopPreGame()%7Bconst e%3D1%3D%3DMAP%3F"Hit S to play!"%3A"MAP "%2BMAP%3Bfor(faviconize(MISC.PLAY%2C102)%2Cawait sleep(1e3)%3B!playing%3B)render(%60%24%7BMISC.FLAG_DARK%7D %24%7Be%7D%60)%2Cawait sleep(210)%2Crender(%60%24%7BMISC.FLAG_LIGHT%7D %24%7Be%7D%60)%2Cawait sleep(210)%7Dasync function loopGame()%7Bfor(playing%3D!0%3Bplaying%26%26map.length>0%3B)%7Bconst e%3DgetCharacter(jump%2Cmap%5B0%5D)%3Bif(e%3D%3DCOLLISION)%7Bfaviconize(MISC.STAR_LIGHT%2C101)%2Crender(CHARACTER.CRASH%2Cmap%2C"SCORE "%2Bticks)%2Cwin%3D!1%3Bbreak%7Dmap%3Dmap.slice(1%2Cmap.length)%2Crender(e%2Cmap)%2Cticks%2B%2B%2Cjump>-1%26%26jump--%2Cawait sleep(210)%7Dwin%26%26loopWin(ticks)%7Dasync function loopWin(e)%7Bfor(faviconize(MISC.FLAG_LIGHT%2C104)%3Bplaying%3B)document.title%3D" You win!  SCORE "%2Be%2Cawait sleep(210)%2Cdocument.title%3D" You win!  SCORE "%2Be%2Cawait sleep(210)%7Dfunction loadMap(e)%7Breturn readStorage()%3FreadStorage()%3AMAPS%5Be%5D%7Dfunction getCharacter(e%2Ct)%7Breturn e>0%3Ft%3D%3DBOX.TOP%3FCOLLISION%3At%3D%3DBOX.BOTTOM%3FCHARACTER.OVER%3ACHARACTER.TOP%3At%3D%3DBOX.BOTTOM%3FCOLLISION%3At%3D%3DBOX.TOP%3FCHARACTER.UNDER%3ACHARACTER.BOTTOM%7Dasync function dotDotDot(e)%7Brender(e%2B".")%2Cawait sleep(210)%2Crender(e%2B"..")%2Cawait sleep(210)%2Crender(e%2B"...")%2Cawait sleep(210)%7Dfunction readStorage()%7Btry%7Breturn localStorage.getItem("map")%7Dcatch(e)%7Breturn localStorageError(e)%2C!1%7D%7Dfunction clearStorage()%7Btry%7BlocalStorage.removeItem("map")%7Dcatch(e)%7BlocalStorageError(e)%7D%7Dfunction localStorageError(e)%7Bconsole.log("Maybe somebody is blocking localStorage...")%2Cconsole.error(e)%7Dfunction render(e%2Ct%2Co)%7Breturn t%3Fo%3Fvoid(document.title%3D%60%24%7Be%7D%24%7Bt.slice(0%2C2)%7D %24%7Bo%7D%60)%3Adocument.title%3D%60%24%7Be%7D%24%7Bt%7D%60%3Adocument.title%3De%7Dfunction hasCollision(e%2Ct)%7Breturn e%3D%3DCHARACTER.BOTTOM%26%26t%3D%3DBOX.BOTTOM%7C%7Ce%3D%3DCHARACTER.TOP%26%26t%3D%3DBOX.TOP%7Dfunction faviconize(e%2Ct)%7Bconst o%3Ddocument.createElement("canvas")%3Bo.height%3D128%2Co.width%3D128%3Bconst n%3Do.getContext("2d")%3Bn.lineJoin%3D"round"%2Cn.lineWidth%3D96%2Cn.strokeRect(48%2C48%2C32%2C32)%2Cn.fillRect(48%2C48%2C32%2C32)%2Cn.stroke()%2Cn.fill()%2Cn.fillStyle%3D"white"%2Cn.font%3D"128px serif"%2Cn.textAlign%3D"center"%2Cn.fillText(e%2C64%2Ct)%3Bconst a%3Ddocument.querySelector("link%5Brel*%3D'icon'%5D")%7C%7Cdocument.createElement("link")%3Ba.rel%3D"icon"%2Ca.href%3Do.toDataURL()%2Cdocument.getElementsByTagName("head")%5B0%5D.appendChild(a)%7Dfunction log()%7BDEBUG%26%26console.log(...arguments)%7Dasync function sleep(e)%7Breturn new Promise(t%3D>setTimeout(t%2Ce))%7Ddocument.addEventListener("keydown"%2Ce%3D>%7Bif(!e.isComposing%26%26229!%3D%3De.keyCode)return log(e.key)%2Ce.key in commands%3F(e.preventDefault()%2Ccommands%5Be.key%5D())%3Ae.key in MAPS%3F(e.preventDefault()%2Clocation.href%3D%60%24%7Blocation.origin%7D%24%7Blocation.pathname%7D%3Fmap%3D%24%7Be.key%7D%60)%3Avoid 0%7D)%2CloopPreGame()%3B%7D())%3B">title run</a>





<a href="javascript:for(Q=64,m=b=Q*Q,a=[P=l=u=d=p=S=w=0],u=89,f=(h=j=t=(b+Q)/2)-1,(B=(D=document).body).appendChild(x=D.createElement('p')),(X=x.style).position='fixed',X.left=X.top=0,X.background='#FFF',x.innerHTML='<p></p><canvas>',v=(s=x.childNodes)[0],(s=s[1]).width=s.height=Q*5,c=s.getContext('2d'),onkeydown=onblur=F=function(e,z){z?a[f]?(w+=m,f=Math.random(l+=8)*(R=Q-2)*R|(u=0),F(f+=Q+1+(f/R|0)*2,z)):F(f):e<0?(l?--l:(y=t,t=a[t]-2,F(y)),S+=(w*=.8)/4,m=999/(u+++10),a[h+=[-1,-Q,1,Q][d=p]]?B.removeChild(x,alert('Game Over')):(F(h),F(e,j=h),v.innerHTML=P?(setTimeout(F,50,e,0),S|0):'Press P')):-e?(y=(a[e]=e<Q|e>=Q*Q-Q|!(e%Q)|e%Q==Q-1|(e==h)*2)+(e==f),e==h&&(a[j]=2+h),c.fillStyle='hsl('+!a[e]*99+','+m*2+'%,'+y*50+'%)',c.fillRect(e%Q*5,(e/Q|0)*5,5,5)):isNaN(y=e.keyCode-37)|y==43?(P=y&&!P)&&F(-1):p=!P|y&-4|!(y^2^d)?p:y;return!1};--b;F(b));void F(-1)">snake</a>



<a href=""></a>







<a href=""></a>







<a href=""></a>
